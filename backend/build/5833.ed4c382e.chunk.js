"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[5833],{7761:(U,c,t)=>{t.d(c,{pl:()=>g,aY:()=>R,q5:()=>r.q});var e=t(67294),n=t(30422),u=t(25804),m=t(18172);const f={data:[],isLoading:!0},L=(s,l)=>(0,m.ZP)(s,i=>{switch(l.type){case"GET_DATA_SUCCEEDED":{i.data=l.data,i.isLoading=!1;break}case"GET_DATA_ERROR":{i.isLoading=!1;break}default:return i}}),g=({ssoEnabled:s})=>{const[l,i]=(0,e.useReducer)(L,f),D=(0,n.lm)(),{get:T}=(0,n.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!s){i({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:E}=await T((0,u.IF)("providers"));i({type:"GET_DATA_SUCCEEDED",data:E})}catch(E){console.error(E),i({type:"GET_DATA_ERROR"}),D({type:"warning",message:{id:"notification.error"}})}})()},[T,s,D]),l};var a=t(14293),A=t.n(a),o=t(86896),I=t(16550),r=t(71926);const v="strapi-notification-seat-limit",P="https://cloud.strapi.io/profile/billing",h="https://strapi.io/billing/request-seats",R=()=>{const{formatMessage:s}=(0,o.Z)();let{license:l,isError:i,isLoading:D}=(0,r.q)();const T=(0,n.lm)(),{pathname:C}=(0,I.TH)(),{enforcementUserCount:E,permittedSeats:_,licenseLimitStatus:d,isHostedOnStrapiCloud:S}=l;(0,e.useEffect)(()=>{if(i||D)return;const B=!A()(_)&&!window.sessionStorage.getItem(`${v}-${C}`)&&(d==="AT_LIMIT"||d==="OVER_LIMIT");let y;d==="OVER_LIMIT"?y="warning":d==="AT_LIMIT"&&(y="softWarning"),B&&T({type:y,message:s({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:d}),title:s({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:d,enforcementUserCount:E,permittedSeats:_}),link:{url:S?P:h,label:s({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:S})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${v}-${C}`,!0)}})},[T,l,C,s,D,_,d,E,S,i])}},71926:(U,c,t)=>{t.d(c,{q:()=>m});var e=t(67294),n=t(30422),u=t(88767);function m({enabled:f}={enabled:!0}){const{get:M}=(0,n.kY)(),{data:L,isError:O,isLoading:g}=(0,u.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:o}}=await M("/admin/license-limit-information");return o},{enabled:f}),a=L??{},A=e.useCallback(o=>(a?.features??[]).find(r=>r.name===o)?.options??{},[a?.features]);return{license:a,getFeature:A,isError:O,isLoading:g}}},85833:(U,c,t)=>{t.r(c),t.d(c,{CreateActionEE:()=>r});var e=t(67294),n=t(11047),u=t(84495),m=t(52624),f=t(29728),M=t(51277),L=t(23293),O=t(14293),g=t.n(O),a=t(45697),A=t.n(a),o=t(86896),I=t(7761);const r=({onClick:v})=>{const{formatMessage:P}=(0,o.Z)(),{license:{permittedSeats:h,shouldStopCreate:p},isError:R,isLoading:s}=(0,I.q5)();return R||s?null:e.createElement(n.k,{gap:2},!g()(h)&&p&&e.createElement(u.u,{description:P({id:"Settings.application.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"}),position:"left"},e.createElement(m.J,{width:`${14/16}rem`,height:`${14/16}rem`,color:"danger500",as:M.Z})),e.createElement(f.z,{"data-testid":"create-user-button",onClick:v,startIcon:e.createElement(L.Z,null),size:"S",disabled:p},P({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})))};r.propTypes={onClick:A().func.isRequired}}}]);
